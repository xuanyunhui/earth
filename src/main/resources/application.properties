# 应用基础配置
quarkus.http.port=8080
quarkus.http.host=0.0.0.0

# OpenAPI配置
quarkus.swagger-ui.always-include=true
quarkus.swagger-ui.path=/swagger-ui
quarkus.smallrye-openapi.path=/openapi

# OpenAPI文档信息
mp.openapi.extensions.enabled=true
mp.openapi.info.title=Earth用户管理系统API
mp.openapi.info.version=1.0.0
mp.openapi.info.description=基于Quarkus + Keycloak的用户管理系统REST API
mp.openapi.info.contact.name=Earth开发团队
mp.openapi.info.contact.email=dev@earth.com
mp.openapi.info.license.name=MIT
mp.openapi.info.license.url=https://opensource.org/licenses/MIT

# 服务器信息
mp.openapi.servers.0.url=http://localhost:8080
mp.openapi.servers.0.description=本地开发环境

# Keycloak OIDC Client 配置 (用于用户名密码登录)
quarkus.oidc-client.auth-server-url=http://192.168.11.144:8180/realms/timeset
quarkus.oidc-client.client-id=timeset-app
quarkus.oidc-client.credentials.secret=timeset-secret
quarkus.oidc-client.grant.type=password
quarkus.oidc-client.scopes=openid

# Keycloak OIDC Client 配置 (用于 broker 授权码交换)
quarkus.oidc-client.broker.auth-server-url=http://192.168.11.144:8180/realms/timeset
quarkus.oidc-client.broker.client-id=timeset-app
quarkus.oidc-client.broker.credentials.secret=timeset-secret
# quarkus.oidc-client.broker.grant.type=code
quarkus.oidc-client.broker.scopes=openid
#TODO: 确认是否需要redirect-path
quarkus.oidc-client.broker.authentication.redirect-path=/auth/callback
#TODO: 确认是否有更优雅的方式配置重定向URI
app.redirect-uri=http://localhost:8080/auth/callback
app.frontend-callback-url=http://localhost:3000/callback
# MicroProfile JWT 配置 (用于验证JWT token)
mp.jwt.verify.issuer=http://192.168.11.144:8180/realms/timeset
mp.jwt.verify.publickey.location=http://192.168.11.144:8180/realms/timeset/protocol/openid-connect/certs
# 暂时禁用 audience 验证来排查问题
# mp.jwt.verify.audiences=timeset-app
# 日志配置
quarkus.log.level=INFO
quarkus.log.category."cn.ac.bestheme.oidc".level=DEBUG

# 开发模式配置
quarkus.live-reload.password=changeit
quarkus.live-reload.url=http://localhost:8080
